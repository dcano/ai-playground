CREATE TABLE SPRING_AI_CHAT_MEMORY(
    conversation_id VARCHAR(36) NOT NULL,
    content LONGVARCHAR NOT NULL,
    type VARCHAR(10) NOT NULL,
    "TIMESTAMP" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);

CREATE INDEX SPRING_AI_CHAT_MEMORY_CONVERSATION_ID_TIMESTAMP_IDX ON SPRING_AI_CHAT_MEMORY(conversation_id, "TIMESTAMP");
ALTER TABLE SPRING_AI_CHAT_MEMORY ADD CONSTRAINT SPRING_AI_CHAT_MEMORY_PK TYPE_CHECK CHECK (type IN ('USER', 'ASSISTANT', 'SYSTEM', 'TOOL'));